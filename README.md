# gas_scrape_general
GASでスクレイプする

## Google スプレッドシートの準備
1. Google スプレッドシートを作成
2. 機能拡張＞Apps Scriptで、Apps Scriptを作成
3. URLから、スクリプトIDを取得
   - `https://script.google.com/u/0/home/projects/[プロジェクトID]/edit`

## Nodeプロジェクトの環境構築
1. プロジェクトを作成
```
npm init -y
```

2. パッケージをインストール
```
npm install @google/clasp
```

3. claspでログイン
```
npx clasp login
```

4. スクリプトIDを設定
```
npx clasp clone [スクリプトID]
```


5. `.gitignore`に、`.clasp.json`を追加
- スクリプトIDが書いてあるため
- ただし、スクリプトIDが流出したとしてもログインは別なので、セキュリティ上の問題はない
- あくまで念のための処理である


## スクリプトの作成
- GASは、デフォルトでは、`コード.gs`というファイルが作成される
- このファイルを編集してもよいが、カレントディレクトリには様々なファイルがあり、使用しづらいので、`src`ディレクトリを作成し、その中に`コード.gs`を作成する
- なお、ソースコード名はなんでもよく、階層も自由
  - GASでは、ディレクトリやファイルは一切無視され、その中で定義された関数がグローバル環境に配置される
  - したがって、元の `src/コード.gs`は、そのまま使ってもよいし、削除して別ファイル名で作り直してもよい


## アップロード
```
npx clasp push
```
- アップロード対象のファイルは、`.clasp.json`に記載されている
